<!DOCTYPE html> 
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sistem Informasi Barang - SMAN 1 Magetan</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class', // Mengaktifkan Dark Mode berbasis Class
            theme: {
                extend: {
                    colors: {
                        smanBlue: '#1E88E5',
                        smanRed: '#D32F2F',
                        smanYellow: '#FBC02D',
                        smanDark: '#212121',
                        bgLight: '#F3F4F6',
                        // Warna khusus Dark Mode
                        darkBg: '#111827',     // Gray 900
                        darkCard: '#1F2937',   // Gray 800
                        darkInput: '#374151',  // Gray 700
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* Smooth Transition untuk Dark Mode */
        body, div, nav, button, input, select, textarea, table, tr, td, th {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }

        .active-nav { color: #FBC02D; font-weight: 700; border-bottom: 2px solid #FBC02D; }
        
        /* Animasi Transisi Halaman */
        .page-transition { animation: fadeInScale 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeInScale { 
            from { opacity: 0; transform: scale(0.98) translateY(10px); } 
            to { opacity: 1; transform: scale(1) translateY(0); } 
        }

        /* Toast Notification Animation */
        .toast-enter { transform: translateY(100%); opacity: 0; }
        .toast-enter-active { transform: translateY(0); opacity: 1; transition: all 0.3s ease-out; }
        .toast-exit { transform: translateY(0); opacity: 1; }
        .toast-exit-active { transform: translateY(100%); opacity: 0; transition: all 0.3s ease-in; }

        /* Kustom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #1E88E5; border-radius: 10px; }
        
        /* Modal Animation */
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: all 0.2s ease-out; }
    </style>
</head>
<body class="text-smanDark bg-bgLight dark:bg-darkBg dark:text-gray-100 flex flex-col min-h-screen">

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-5 right-5 z-[100] flex flex-col gap-2 pointer-events-none"></div>

    <!-- Navigation Bar -->
    <nav class="bg-smanBlue dark:bg-gray-900 text-white shadow-lg sticky top-0 z-50 border-b border-blue-600 dark:border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo & Identitas -->
                <div class="flex items-center gap-3 cursor-pointer select-none" onclick="app.navigate('home')">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-C0IDYx7vtd5_vIaL0CGaWwVgFDD2TJsMvQ&s" alt="Logo SMAN 1 Magetan" class="h-10 w-10 rounded-full bg-white p-0.5 shadow-sm object-contain">
                    <div class="flex flex-col">
                        <span class="font-bold text-sm md:text-base leading-tight">SMAN 1 MAGETAN</span>
                        <span class="text-[10px] text-blue-100 dark:text-gray-400 uppercase tracking-widest font-medium">Sistem Informasi Barang</span>
                    </div>
                </div>

                <!-- Desktop Navigation & Dark Mode Toggle -->
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex items-center space-x-6">
                        <button onclick="app.navigate('home')" id="nav-home" class="py-2 hover:text-smanYellow transition text-sm font-medium">Beranda</button>
                        <button onclick="app.navigate('list')" id="nav-list" class="py-2 hover:text-smanYellow transition text-sm font-medium">Daftar Barang</button>
                        <button onclick="app.navigate('report')" id="nav-report" class="py-2 hover:text-smanYellow transition text-sm font-medium">Lapor / Titip</button>
                        <button onclick="app.navigate('admin')" id="nav-admin" class="ml-2 py-2 px-5 bg-white text-smanBlue rounded-full hover:bg-smanYellow hover:text-smanDark transition font-bold text-xs shadow-md transform hover:-translate-y-0.5 dark:bg-gray-800 dark:text-blue-400 dark:hover:text-white">
                            ADMIN PANEL
                        </button>
                    </div>

                    <!-- Dark Mode Toggle Button -->
                    <button onclick="app.toggleTheme()" class="p-2 rounded-full hover:bg-white/10 transition active:scale-90 focus:outline-none ml-2 md:ml-4" aria-label="Toggle Dark Mode">
                        <i id="theme-icon" class="fas fa-moon text-lg"></i>
                    </button>

                    <!-- Mobile Menu Toggle -->
                    <button onclick="app.toggleMobileMenu()" class="md:hidden text-white p-2 focus:outline-none active:scale-90 transition">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Dropdown Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-blue-700 dark:bg-gray-800 border-t border-blue-600 dark:border-gray-700 overflow-hidden transition-all duration-300 shadow-inner">
            <div class="flex flex-col">
                <button onclick="app.navigate('home')" class="p-4 text-left active:bg-blue-800 dark:active:bg-gray-700 border-b border-blue-600/50 dark:border-gray-700 hover:bg-blue-600 dark:hover:bg-gray-700 transition">Beranda</button>
                <button onclick="app.navigate('list')" class="p-4 text-left active:bg-blue-800 dark:active:bg-gray-700 border-b border-blue-600/50 dark:border-gray-700 hover:bg-blue-600 dark:hover:bg-gray-700 transition">Daftar Barang</button>
                <button onclick="app.navigate('report')" class="p-4 text-left active:bg-blue-800 dark:active:bg-gray-700 border-b border-blue-600/50 dark:border-gray-700 hover:bg-blue-600 dark:hover:bg-gray-700 transition">Formulir Lapor</button>
                <button onclick="app.navigate('admin')" class="p-4 text-left font-bold text-smanYellow active:bg-blue-800 dark:active:bg-gray-700 hover:bg-blue-600 dark:hover:bg-gray-700 transition">Admin Area</button>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main id="main-content" class="flex-grow w-full max-w-7xl mx-auto px-4 py-6 page-transition min-h-[80vh]">
        <!-- Konten akan dimuat di sini oleh JavaScript -->
    </main>

    <!-- Footer -->
    <footer class="bg-smanDark dark:bg-black text-gray-400 py-10 mt-auto text-sm border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                <!-- Info Sekolah -->
                <div class="text-center md:text-left">
                    <h3 class="font-bold text-white tracking-wider uppercase mb-3">SMAN 1 MAGETAN</h3>
                    <p class="text-gray-500 leading-relaxed mb-4">
                        Jl. Monginsidi No. 24, Magetan, Jawa Timur.<br>
                        Pusat layanan informasi barang hilang, temuan, dan titipan siswa.
                    </p>
                </div>
                
                <!-- Pengembang -->
                <div class="flex flex-col items-center md:items-end gap-3 text-center md:text-right">
                    <span class="text-[10px] uppercase tracking-[0.2em] text-gray-600 font-bold">Dikembangkan Oleh</span>
                    <span class="text-lg font-bold text-white hover:text-smanBlue transition cursor-default">Akhram Rafay Fatih Nizzar</span>
                    <span class="text-xs text-smanYellow font-medium bg-smanYellow/10 px-3 py-1 rounded-full border border-smanYellow/20">Kelas XII-8</span>
                    
                    <div class="flex gap-6 mt-2 items-center">
                        <a href="https://instagram.com/akhrmrfyy" target="_blank" class="flex items-center gap-2 hover:text-pink-500 transition-colors group">
                            <i class="fab fa-instagram text-lg group-hover:scale-110 transition-transform"></i>
                            <span class="text-xs">@akhrmrfyy</span>
                        </a>
                        <a href="https://wa.me/6285730288323" target="_blank" class="flex items-center gap-2 hover:text-green-500 transition-colors group">
                            <i class="fab fa-whatsapp text-lg group-hover:scale-110 transition-transform"></i>
                            <span class="text-xs">085730288323</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="mt-10 pt-6 border-t border-gray-800/50 text-center">
                <p class="text-[10px] text-gray-700 font-medium tracking-widest uppercase italic">
                    &copy; 2026 SMAN 1 MAGETAN. ALL RIGHTS RESERVED.
                </p>
            </div>
        </div>
    </footer>

    <!-- VIEW TEMPLATES -->

    <!-- 1. Home Dashboard -->
    <template id="tpl-home">
        <div class="space-y-6">
            <!-- Hero Header -->
            <div class="bg-white dark:bg-darkCard rounded-3xl p-8 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center text-center relative overflow-hidden transition-colors">
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-smanBlue via-smanBlue to-smanYellow"></div>
                <div class="w-20 h-20 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4 text-smanBlue dark:text-blue-400 shadow-inner">
                    <i class="fas fa-box-open text-3xl"></i>
                </div>
                <h1 class="text-2xl md:text-3xl font-black text-smanDark dark:text-white mb-2">Pusat Informasi Barang</h1>
                <p class="text-sm text-gray-500 dark:text-gray-400 max-w-md mx-auto leading-relaxed">
                    Sistem terpadu untuk mengelola barang hilang, barang temuan, serta layanan titipan bekal dan barang siswa secara transparan.
                </p>
                
                <div class="flex flex-wrap justify-center gap-4 mt-8 w-full max-w-lg">
                    <button onclick="app.navigate('report')" class="flex-1 min-w-[140px] py-4 bg-smanBlue text-white rounded-2xl font-bold shadow-lg shadow-blue-200 dark:shadow-none hover:shadow-xl hover:bg-blue-600 active:scale-95 transition transform">
                        <i class="fas fa-plus-circle mr-2"></i>Lapor Barang
                    </button>
                    <button onclick="app.navigate('list')" class="flex-1 min-w-[140px] py-4 bg-white dark:bg-transparent text-smanBlue dark:text-blue-400 border-2 border-smanBlue dark:border-blue-500 rounded-2xl font-bold hover:bg-blue-50 dark:hover:bg-blue-900/20 active:scale-95 transition">
                        <i class="fas fa-list-ul mr-2"></i>Cek Daftar
                    </button>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div onclick="app.navigate('list', {filter: 'hilang'})" class="bg-white dark:bg-darkCard p-6 rounded-3xl shadow-sm border-b-4 border-smanRed cursor-pointer hover:translate-y-[-4px] transition group hover:shadow-md">
                    <p class="text-[10px] font-black text-smanRed uppercase tracking-widest mb-1">Barang Hilang</p>
                    <div class="flex justify-between items-end">
                        <h3 class="text-4xl font-black text-gray-800 dark:text-white tracking-tight" id="count-hilang">0</h3>
                        <i class="fas fa-search text-gray-100 dark:text-gray-700 text-4xl group-hover:text-red-50 dark:group-hover:text-red-900/30 transition transform group-hover:scale-110"></i>
                    </div>
                    <p class="text-[10px] text-gray-400 mt-2">Ketuk untuk lihat detail</p>
                </div>
                <div onclick="app.navigate('list', {filter: 'titipan'})" class="bg-white dark:bg-darkCard p-6 rounded-3xl shadow-sm border-b-4 border-smanBlue cursor-pointer hover:translate-y-[-4px] transition group hover:shadow-md">
                    <p class="text-[10px] font-black text-smanBlue uppercase tracking-widest mb-1">Titipan Orang Tua</p>
                    <div class="flex justify-between items-end">
                        <h3 class="text-4xl font-black text-gray-800 dark:text-white tracking-tight" id="count-titipan">0</h3>
                        <i class="fas fa-truck-loading text-gray-100 dark:text-gray-700 text-4xl group-hover:text-blue-50 dark:group-hover:text-blue-900/30 transition transform group-hover:scale-110"></i>
                    </div>
                    <p class="text-[10px] text-gray-400 mt-2">Ketuk untuk lihat detail</p>
                </div>
                <div onclick="app.navigate('list', {filter: 'temuan'})" class="bg-white dark:bg-darkCard p-6 rounded-3xl shadow-sm border-b-4 border-smanYellow cursor-pointer hover:translate-y-[-4px] transition group hover:shadow-md">
                    <p class="text-[10px] font-black text-yellow-600 dark:text-yellow-500 uppercase tracking-widest mb-1">Barang Temuan</p>
                    <div class="flex justify-between items-end">
                        <h3 class="text-4xl font-black text-gray-800 dark:text-white tracking-tight" id="count-temuan">0</h3>
                        <i class="fas fa-hand-holding-heart text-gray-100 dark:text-gray-700 text-4xl group-hover:text-yellow-50 dark:group-hover:text-yellow-900/30 transition transform group-hover:scale-110"></i>
                    </div>
                    <p class="text-[10px] text-gray-400 mt-2">Ketuk untuk lihat detail</p>
                </div>
            </div>
        </div>
    </template>

    <!-- 2. List View -->
    <template id="tpl-list">
        <div class="space-y-6">
            <div class="bg-white dark:bg-darkCard p-4 rounded-2xl shadow-sm flex flex-col md:flex-row gap-4 items-center sticky top-20 z-40 border border-gray-100 dark:border-gray-700 transition-colors">
                <div class="relative w-full">
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    <input type="text" id="search-input" onkeyup="app.renderItems()" placeholder="Cari nama barang..." class="w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-darkInput border border-gray-100 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-smanBlue focus:bg-white dark:focus:bg-gray-800 dark:text-white outline-none transition">
                </div>
                <select id="filter-category" onchange="app.renderItems()" class="w-full md:w-64 py-3 px-4 bg-gray-50 dark:bg-darkInput dark:text-white border border-gray-100 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-smanBlue outline-none cursor-pointer">
                    <option value="all">Semua Kategori</option>
                    <option value="hilang">Barang Hilang</option>
                    <option value="temuan">Barang Temuan</option>
                    <option value="titipan">Titipan Luar</option>
                </select>
            </div>

            <div id="items-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 pb-20">
                <!-- Cards Injected Here -->
            </div>
            
            <div id="empty-state" class="hidden flex flex-col items-center justify-center py-20 text-gray-400">
                <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-full mb-4 transition-colors">
                    <i class="fas fa-box-open text-4xl opacity-40"></i>
                </div>
                <p class="font-medium">Tidak ada data untuk ditampilkan</p>
                <button onclick="app.navigate('report')" class="mt-4 text-xs font-bold text-smanBlue dark:text-blue-400 hover:underline">Buat Laporan Baru</button>
            </div>
        </div>
    </template>

    <!-- 3. Form View -->
    <template id="tpl-report">
        <div class="max-w-2xl mx-auto pb-20">
            <div class="bg-white dark:bg-darkCard rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden relative transition-colors">
                <!-- Decorative Top -->
                <div class="h-2 bg-gradient-to-r from-smanBlue to-cyan-400"></div>
                
                <div class="bg-smanBlue dark:bg-gray-800 p-8 text-white relative overflow-hidden">
                    <i class="fas fa-file-alt absolute -right-4 -bottom-4 text-9xl text-white opacity-10 rotate-12"></i>
                    <div class="relative z-10">
                        <h2 class="text-2xl font-bold">Buat Laporan Baru</h2>
                        <p class="text-sm text-blue-100 dark:text-gray-400 mt-2 opacity-90 max-w-md">Mohon isi formulir dengan data yang jujur dan akurat untuk memudahkan proses.</p>
                    </div>
                </div>
                
                <form id="report-form" onsubmit="app.handleFormSubmit(event)" class="p-8 space-y-6">
                    <!-- Category Radio Selection -->
                    <div class="space-y-3">
                        <label class="block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest">Pilih Jenis Laporan <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <label class="cursor-pointer group">
                                <input type="radio" name="type" value="hilang" class="peer hidden" checked onchange="app.updateFormLabels()">
                                <div class="p-4 text-center border-2 rounded-2xl text-sm font-semibold border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-darkInput dark:text-gray-300 peer-checked:border-smanRed peer-checked:bg-red-50 dark:peer-checked:bg-red-900/20 peer-checked:text-smanRed dark:peer-checked:text-red-400 hover:border-gray-300 dark:hover:border-gray-500 transition h-full flex flex-col items-center justify-center gap-2">
                                    <i class="fas fa-search text-lg mb-1"></i>
                                    <span>Barang Hilang</span>
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="type" value="temuan" class="peer hidden" onchange="app.updateFormLabels()">
                                <div class="p-4 text-center border-2 rounded-2xl text-sm font-semibold border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-darkInput dark:text-gray-300 peer-checked:border-smanYellow peer-checked:bg-yellow-50 dark:peer-checked:bg-yellow-900/20 peer-checked:text-yellow-700 dark:peer-checked:text-yellow-400 hover:border-gray-300 dark:hover:border-gray-500 transition h-full flex flex-col items-center justify-center gap-2">
                                    <i class="fas fa-hand-holding text-lg mb-1"></i>
                                    <span>Temuan</span>
                                </div>
                            </label>
                            <label class="cursor-pointer group">
                                <input type="radio" name="type" value="titipan" class="peer hidden" onchange="app.updateFormLabels()">
                                <div class="p-4 text-center border-2 rounded-2xl text-sm font-semibold border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-darkInput dark:text-gray-300 peer-checked:border-smanBlue peer-checked:bg-blue-50 dark:peer-checked:bg-blue-900/20 peer-checked:text-smanBlue dark:peer-checked:text-blue-400 hover:border-gray-300 dark:hover:border-gray-500 transition h-full flex flex-col items-center justify-center gap-2">
                                    <i class="fas fa-box text-lg mb-1"></i>
                                    <span>Titipan Luar</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 mb-2 uppercase" id="lbl-name">Nama Barang <span class="text-red-500">*</span></label>
                            <input type="text" name="itemName" required class="w-full p-3 bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-600 rounded-xl text-sm focus:bg-white dark:focus:bg-gray-800 dark:text-white focus:border-smanBlue focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 outline-none transition" placeholder="Contoh: Kunci Motor / Tupperware">
                        </div>
                        <div class="group">
                            <label class="block text-xs font-bold text-gray-500 mb-2 uppercase">Tanggal <span class="text-red-500">*</span></label>
                            <input type="date" name="date" required class="w-full p-3 bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-600 rounded-xl text-sm focus:bg-white dark:focus:bg-gray-800 dark:text-white focus:border-smanBlue focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 outline-none transition text-gray-600 dark:text-gray-300">
                        </div>
                    </div>

                    <div class="group">
                        <label class="block text-xs font-bold text-gray-500 mb-2 uppercase" id="lbl-loc">Lokasi Kejadian / Penempatan <span class="text-red-500">*</span></label>
                        <div class="relative">
                            <i class="fas fa-map-marker-alt absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="text" name="location" required class="w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-600 rounded-xl text-sm focus:bg-white dark:focus:bg-gray-800 dark:text-white focus:border-smanBlue focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 outline-none transition" placeholder="Contoh: Depan Lab Fisika">
                        </div>
                    </div>

                    <div class="group">
                        <label class="block text-xs font-bold text-gray-500 mb-2 uppercase">Keterangan / Ciri Fisik</label>
                        <textarea name="description" rows="3" class="w-full p-3 bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-600 rounded-xl text-sm focus:bg-white dark:focus:bg-gray-800 dark:text-white focus:border-smanBlue focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 outline-none transition" placeholder="Warna, merk, kondisi, atau informasi spesifik lainnya..."></textarea>
                    </div>

                    <div class="pt-4 border-t border-dashed border-gray-200 dark:border-gray-700">
                        <label class="block text-xs font-bold text-gray-500 mb-2 uppercase" id="lbl-contact">Identitas Pelapor / Pengirim <span class="text-red-500">*</span></label>
                        <div class="relative">
                            <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="text" name="contact" required class="w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-600 rounded-xl text-sm focus:bg-white dark:focus:bg-gray-800 dark:text-white focus:border-smanBlue focus:ring-4 focus:ring-blue-50 dark:focus:ring-blue-900/20 outline-none transition" placeholder="Nama Lengkap / Kelas / No. WA">
                        </div>
                    </div>

                    <button type="submit" class="w-full py-4 bg-smanBlue text-white font-bold rounded-2xl shadow-lg hover:shadow-blue-300 hover:bg-blue-600 active:scale-95 transition flex justify-center items-center gap-2 group">
                        <i class="fas fa-paper-plane group-hover:-translate-y-1 group-hover:translate-x-1 transition-transform"></i>
                        Kirim Laporan
                    </button>
                </form>
            </div>
        </div>
    </template>

    <!-- 4. Admin View -->
    <template id="tpl-admin">
        <div class="space-y-6">
            <div class="flex justify-between items-center bg-white dark:bg-darkCard p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors">
                <div>
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">Manajemen Data</h2>
                    <p class="text-xs text-gray-400">Kelola status dan data barang</p>
                </div>
                <button onclick="app.logoutAdmin()" class="px-5 py-2.5 bg-red-50 dark:bg-red-900/20 text-smanRed dark:text-red-400 border border-red-100 dark:border-red-900/30 rounded-xl text-xs font-bold hover:bg-smanRed hover:text-white dark:hover:bg-red-600 transition flex items-center gap-2">
                    <i class="fas fa-sign-out-alt"></i> KELUAR
                </button>
            </div>

            <div class="bg-white dark:bg-darkCard rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors">
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm whitespace-nowrap">
                        <thead class="bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 font-bold uppercase text-[10px] tracking-widest border-b border-gray-100 dark:border-gray-700">
                            <tr>
                                <th class="px-6 py-4">Item & Pelapor</th>
                                <th class="px-6 py-4">Kategori</th>
                                <th class="px-6 py-4 text-center">Update Status</th>
                                <th class="px-6 py-4 text-right">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="admin-table-body" class="divide-y divide-gray-100 dark:divide-gray-700">
                            <!-- Rows -->
                        </tbody>
                    </table>
                    
                    <div id="admin-empty" class="hidden text-center py-10 text-gray-400 text-sm">
                        Belum ada data laporan masuk.
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- LOGIN MODAL (Admin) -->
    <div id="login-modal" class="fixed inset-0 bg-smanDark/80 dark:bg-black/90 hidden flex justify-center items-center z-[60] p-4 backdrop-blur-sm transition-opacity opacity-0 pointer-events-none">
        <div class="bg-white dark:bg-darkCard p-8 rounded-3xl shadow-2xl w-full max-w-sm text-center transform scale-95 transition-all duration-300">
            <div class="h-16 w-16 bg-blue-100 dark:bg-blue-900/30 text-smanBlue dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-shield-alt text-2xl"></i>
            </div>
            <h3 class="text-xl font-black text-gray-800 dark:text-white mb-2">Akses Administrator</h3>
            <p class="text-xs text-gray-400 mb-8">Masukkan kode otentikasi untuk mengelola database sekolah.</p>
            
            <form onsubmit="event.preventDefault(); app.checkLogin();">
                <input type="password" id="admin-pass" placeholder="Password Admin" class="w-full p-4 bg-gray-50 dark:bg-darkInput border border-gray-200 dark:border-gray-600 rounded-2xl mb-4 text-center focus:ring-2 focus:ring-smanBlue focus:bg-white dark:focus:bg-gray-800 dark:text-white outline-none transition font-bold text-gray-700">
                
                <button type="submit" class="w-full py-3.5 bg-smanBlue text-white font-bold rounded-2xl shadow-lg hover:bg-blue-600 active:scale-95 transition mb-3">MASUK PANEL</button>
            </form>
            <button onclick="app.closeLoginModal()" class="w-full py-2 text-gray-400 text-xs font-medium hover:text-smanDark dark:hover:text-white transition">Batalkan</button>
        </div>
    </div>

    <!-- DETAIL MODAL (New Feature) -->
    <div id="detail-modal" class="fixed inset-0 bg-smanDark/80 dark:bg-black/90 hidden flex justify-center items-end md:items-center z-[70] p-4 backdrop-blur-sm transition-opacity opacity-0 pointer-events-none" onclick="if(event.target === this) app.closeDetail()">
        <div class="bg-white dark:bg-darkCard w-full max-w-md rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden transform translate-y-full md:translate-y-10 transition-transform duration-300 flex flex-col max-h-[85vh]">
            
            <!-- Modal Header -->
            <div class="bg-gray-50 dark:bg-gray-800 p-5 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center sticky top-0 z-10">
                <h3 class="text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2">
                    <i class="fas fa-info-circle text-smanBlue"></i> Detail Barang
                </h3>
                <button onclick="app.closeDetail()" class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-300 hover:bg-gray-300 transition flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Modal Content (Scrollable) -->
            <div id="detail-content" class="p-6 overflow-y-auto">
                <!-- Data will be injected here -->
            </div>

            <!-- Modal Footer -->
            <div class="p-5 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-center">
                <p class="text-[10px] text-gray-400 italic">Sistem Informasi SMAN 1 Magetan</p>
            </div>
        </div>
    </div>

    <!-- CORE LOGIC -->
    <script>
        const app = {
            // State
            items: [],
            isAdmin: false,
            theme: 'light', // 'light' or 'dark'
            
            // Initialization
            init: function() {
                this.loadTheme();
                this.loadData();
                this.navigate('home');
            },

            // Theme Logic (New)
            loadTheme: function() {
                const storedTheme = localStorage.getItem('sman1_theme');
                if (storedTheme) {
                    this.theme = storedTheme;
                } else {
                    // Check system preference
                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        this.theme = 'dark';
                    }
                }
                this.applyTheme();
            },

            toggleTheme: function() {
                this.theme = this.theme === 'light' ? 'dark' : 'light';
                localStorage.setItem('sman1_theme', this.theme);
                this.applyTheme();
            },

            applyTheme: function() {
                const html = document.documentElement;
                const icon = document.getElementById('theme-icon');
                
                if (this.theme === 'dark') {
                    html.classList.add('dark');
                    if(icon) {
                        icon.classList.remove('fa-moon');
                        icon.classList.add('fa-sun');
                        icon.classList.add('text-yellow-400');
                    }
                } else {
                    html.classList.remove('dark');
                    if(icon) {
                        icon.classList.remove('fa-sun');
                        icon.classList.remove('text-yellow-400');
                        icon.classList.add('fa-moon');
                    }
                }
            },

            // Data Persistence
            loadData: function() {
                const stored = localStorage.getItem('sman1_items');
                if (stored) {
                    this.items = JSON.parse(stored);
                } else {
                    // Default Mock Data
                    this.items = [
                        { id: 1707321200000, type: 'hilang', name: 'Jam Tangan Casio', location: 'Mushola', date: '2026-02-08', desc: 'Tali hitam, ada goresan di kaca', contact: 'Andi (XI MIPA 1)', status: 'Hilang' },
                        { id: 1707407600000, type: 'titipan', name: 'Bekal Makan Siang', location: 'Pos Satpam', date: '2026-02-09', desc: 'Kotak warna hijau untuk Budi XII IPS 2', contact: 'Ibu Budi (Ortu)', status: 'Dititipkan' },
                        { id: 1707234800000, type: 'temuan', name: 'Kunci Motor', location: 'Parkir Belakang', date: '2026-02-07', desc: 'Gantungan kunci SMANSA', contact: 'Pak Satpam', status: 'Ditemukan' },
                        { id: 1707409000000, type: 'titipan', name: 'Seragam Olahraga', location: 'Pos Satpam', date: '2026-02-09', desc: 'Tertinggal di rumah, untuk Rina X-4', contact: 'Ayah Rina', status: 'Diambil' }
                    ];
                    this.saveData();
                }
            },

            saveData: function() {
                localStorage.setItem('sman1_items', JSON.stringify(this.items));
                this.updateDashboardStats();
            },

            // UI Helpers
            showToast: function(message, type = 'success') {
                const container = document.getElementById('toast-container');
                const toast = document.createElement('div');
                
                const colors = type === 'success' ? 'bg-green-500' : (type === 'error' ? 'bg-red-500' : 'bg-smanBlue');
                const icon = type === 'success' ? 'fa-check-circle' : (type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle');

                toast.className = `${colors} text-white px-6 py-4 rounded-2xl shadow-xl flex items-center gap-3 min-w-[300px] pointer-events-auto toast-enter`;
                toast.innerHTML = `
                    <i class="fas ${icon} text-lg"></i>
                    <span class="font-medium text-sm">${message}</span>
                `;

                container.appendChild(toast);

                requestAnimationFrame(() => {
                    toast.classList.remove('toast-enter');
                    toast.classList.add('toast-enter-active');
                });

                setTimeout(() => {
                    toast.classList.remove('toast-enter-active');
                    toast.classList.add('toast-exit-active');
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            },

            formatDate: function(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                try {
                    return new Date(dateString).toLocaleDateString('id-ID', options);
                } catch (e) {
                    return dateString;
                }
            },

            // Navigation Logic
            navigate: function(pageId, params = {}) {
                // Mobile menu close logic
                document.getElementById('mobile-menu').classList.add('hidden');
                
                // Auth Check
                if(pageId === 'admin' && !this.isAdmin) {
                    this.openLoginModal();
                    return;
                }

                // Update Active State
                document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));
                const activeBtn = document.getElementById(`nav-${pageId}`);
                if(activeBtn) activeBtn.classList.add('active-nav');

                // Render Template
                const main = document.getElementById('main-content');
                const template = document.getElementById(`tpl-${pageId}`);
                
                if (!template) return;

                main.innerHTML = '';
                // Cloning to preserve template
                main.appendChild(template.content.cloneNode(true));

                // Page Specific Init
                if(pageId === 'home') this.updateDashboardStats();
                if(pageId === 'list') {
                    // Apply param if exists
                    if(params.filter) {
                        const select = document.getElementById('filter-category');
                        if(select) select.value = params.filter;
                    }
                    this.renderItems();
                }
                if(pageId === 'report') this.initReportForm();
                if(pageId === 'admin') this.renderAdminTable();

                window.scrollTo({top: 0, behavior: 'smooth'});
            },

            toggleMobileMenu: function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            },

            // Dashboard Logic
            updateDashboardStats: function() {
                const elHilang = document.getElementById('count-hilang');
                if(!elHilang) return; 

                const countHilang = this.items.filter(i => i.type === 'hilang' && i.status === 'Hilang').length;
                const countTitipan = this.items.filter(i => i.type === 'titipan' && i.status === 'Dititipkan').length;
                const countTemuan = this.items.filter(i => i.type === 'temuan' && i.status === 'Ditemukan').length;

                this.animateValue(elHilang, 0, countHilang, 1000);
                this.animateValue(document.getElementById('count-titipan'), 0, countTitipan, 1000);
                this.animateValue(document.getElementById('count-temuan'), 0, countTemuan, 1000);
            },

            animateValue: function(obj, start, end, duration) {
                if(!obj) return;
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    obj.innerHTML = Math.floor(progress * (end - start) + start);
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            },

            // List Logic
            renderItems: function() {
                const grid = document.getElementById('items-grid');
                if(!grid) return;

                const query = document.getElementById('search-input')?.value.toLowerCase() || '';
                const category = document.getElementById('filter-category')?.value || 'all';
                
                grid.innerHTML = '';
                
                const filtered = this.items.filter(item => {
                    const matchSearch = item.name.toLowerCase().includes(query) || 
                                      item.desc.toLowerCase().includes(query) || 
                                      item.contact.toLowerCase().includes(query);
                    const matchCat = category === 'all' || item.type === category;
                    return matchSearch && matchCat;
                });

                // Sort by date descending
                filtered.sort((a, b) => new Date(b.date) - new Date(a.date));

                if(filtered.length === 0) {
                    document.getElementById('empty-state').classList.remove('hidden');
                    return;
                }
                document.getElementById('empty-state').classList.add('hidden');

                filtered.forEach(item => {
                    let badgeClass = '';
                    let typeLabel = '';
                    let statusColor = '';

                    switch(item.type) {
                        case 'hilang': 
                            badgeClass = 'bg-red-50 dark:bg-red-900/30 text-smanRed dark:text-red-400 border-red-100 dark:border-red-900/50'; 
                            typeLabel = 'DICARI'; 
                            break;
                        case 'titipan': 
                            badgeClass = 'bg-blue-50 dark:bg-blue-900/30 text-smanBlue dark:text-blue-400 border-blue-100 dark:border-blue-900/50'; 
                            typeLabel = 'TITIPAN'; 
                            break;
                        case 'temuan': 
                            badgeClass = 'bg-yellow-50 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border-yellow-100 dark:border-yellow-900/50'; 
                            typeLabel = 'TEMUAN'; 
                            break;
                    }

                    if(item.status === 'Diambil' || item.status === 'Selesai' || item.status === 'Sudah Kembali') {
                        statusColor = 'text-green-500';
                    } else {
                        statusColor = 'text-gray-400 dark:text-gray-500';
                    }

                    // Added onClick for detail modal
                    const card = `
                        <div onclick="app.showDetail(${item.id})" class="cursor-pointer bg-white dark:bg-darkCard rounded-3xl p-5 border border-gray-100 dark:border-gray-700 shadow-sm hover:shadow-xl hover:border-smanBlue/30 dark:hover:border-blue-500/30 transition-all duration-300 flex flex-col h-full relative group">
                            <div class="flex justify-between items-start mb-4">
                                <span class="px-3 py-1 border rounded-full text-[10px] font-black tracking-tighter ${badgeClass}">${typeLabel}</span>
                                <span class="text-[10px] text-gray-400 font-medium flex items-center">
                                    <i class="far fa-clock mr-1"></i> ${this.formatDate(item.date)}
                                </span>
                            </div>
                            <h4 class="font-bold text-gray-800 dark:text-white text-lg mb-1 leading-tight group-hover:text-smanBlue dark:group-hover:text-blue-400 transition">${item.name}</h4>
                            <div class="flex items-center text-[11px] text-gray-400 mb-4">
                                <i class="fas fa-map-marker-alt text-smanBlue dark:text-blue-400 mr-1"></i> ${item.location}
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-2xl mb-4 border border-dashed border-gray-200 dark:border-gray-600 flex-grow">
                                <p class="text-xs text-gray-600 dark:text-gray-300 italic leading-relaxed line-clamp-2">"${item.desc}"</p>
                            </div>
                            <div class="flex justify-between items-center pt-4 border-t border-gray-50 dark:border-gray-700 mt-auto">
                                <div class="flex flex-col">
                                    <span class="text-[9px] text-gray-400 uppercase font-bold">Kontak</span>
                                    <span class="text-xs font-bold text-smanBlue dark:text-blue-400 truncate max-w-[120px]">${item.contact}</span>
                                </div>
                                <div class="flex items-center gap-1">
                                    <div class="w-2 h-2 rounded-full ${statusColor === 'text-green-500' ? 'bg-green-500' : 'bg-gray-300 dark:bg-gray-600'}"></div>
                                    <span class="text-xs font-black ${statusColor}">
                                        ${item.status.toUpperCase()}
                                    </span>
                                </div>
                            </div>
                        </div>
                    `;
                    grid.insertAdjacentHTML('beforeend', card);
                });
            },

            // Detail Modal Logic (New)
            showDetail: function(id) {
                const item = this.items.find(i => i.id === id);
                if (!item) return;

                const modal = document.getElementById('detail-modal');
                const content = document.getElementById('detail-content');
                
                // Determine Labels and Colors based on type
                let typeText = 'Barang Hilang';
                let typeColor = 'text-smanRed dark:text-red-400';
                let typeBg = 'bg-red-50 dark:bg-red-900/20';

                if (item.type === 'temuan') {
                    typeText = 'Barang Temuan';
                    typeColor = 'text-yellow-700 dark:text-yellow-400';
                    typeBg = 'bg-yellow-50 dark:bg-yellow-900/20';
                } else if (item.type === 'titipan') {
                    typeText = 'Titipan Barang';
                    typeColor = 'text-smanBlue dark:text-blue-400';
                    typeBg = 'bg-blue-50 dark:bg-blue-900/20';
                }

                content.innerHTML = `
                    <div class="space-y-6">
                        <div class="flex flex-col items-center justify-center p-4 rounded-2xl ${typeBg} border border-dashed mb-2">
                            <span class="text-xs font-black uppercase tracking-widest ${typeColor} mb-1">${typeText}</span>
                            <span class="text-xs font-medium text-gray-500 dark:text-gray-400">ID Laporan: #${item.id.toString().slice(-6)}</span>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Nama Barang</label>
                            <p class="text-xl font-bold text-gray-800 dark:text-white leading-tight">${item.name}</p>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Tanggal</label>
                                <p class="text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
                                    <i class="far fa-calendar-alt text-smanBlue"></i> ${this.formatDate(item.date)}
                                </p>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Status</label>
                                <p class="text-sm font-black ${item.status === 'Hilang' ? 'text-red-500' : 'text-green-500'}">
                                    ${item.status.toUpperCase()}
                                </p>
                            </div>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Lokasi</label>
                            <p class="text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2">
                                <i class="fas fa-map-marker-alt text-smanBlue"></i> ${item.location}
                            </p>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Deskripsi / Ciri Fisik</label>
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-xl text-sm text-gray-600 dark:text-gray-300 italic border border-gray-100 dark:border-gray-700">
                                "${item.desc}"
                            </div>
                        </div>

                        <div class="pt-4 border-t border-gray-100 dark:border-gray-700">
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-1">Kontak / Pelapor</label>
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-smanBlue dark:text-blue-400">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-bold text-gray-800 dark:text-white">${item.contact}</p>
                                    <p class="text-[10px] text-gray-400">Hubungi petugas piket jika ini barang Anda</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                modal.classList.remove('hidden');
                // Repaint to allow transition
                setTimeout(() => {
                    modal.classList.remove('opacity-0', 'pointer-events-none');
                    const card = modal.querySelector('div');
                    card.classList.remove('translate-y-full');
                    if(window.innerWidth >= 768) card.classList.remove('md:translate-y-10'); 
                }, 10);
            },

            closeDetail: function() {
                const modal = document.getElementById('detail-modal');
                const card = modal.querySelector('div');
                
                modal.classList.add('opacity-0', 'pointer-events-none');
                card.classList.add('translate-y-full');
                if(window.innerWidth >= 768) card.classList.add('md:translate-y-10');

                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            },

            // Form Logic
            initReportForm: function() {
                const dateInput = document.querySelector('input[name="date"]');
                if(dateInput) dateInput.valueAsDate = new Date();
                this.updateFormLabels();
            },

            updateFormLabels: function() {
                const typeEl = document.querySelector('input[name="type"]:checked');
                if(!typeEl) return;
                
                const type = typeEl.value;
                const lblName = document.getElementById('lbl-name');
                const lblLoc = document.getElementById('lbl-loc');
                const lblContact = document.getElementById('lbl-contact');

                if(type === 'hilang') {
                    lblName.innerText = "Barang Yang Hilang *";
                    lblLoc.innerText = "Perkiraan Lokasi Hilang *";
                    lblContact.innerText = "Identitas Pemilik (Nama/Kelas) *";
                } else if(type === 'titipan') {
                    lblName.innerText = "Barang Yang Dititipkan *";
                    lblLoc.innerText = "Lokasi Titip (cth: Pos Satpam) *";
                    lblContact.innerText = "Nama Pengirim & Penerima *";
                } else {
                    lblName.innerText = "Nama Barang Temuan *";
                    lblLoc.innerText = "Lokasi Ditemukan *";
                    lblContact.innerText = "Identitas Penemu (Nama/Kontak) *";
                }
            },

            handleFormSubmit: function(e) {
                e.preventDefault();
                const fd = new FormData(e.target);
                const type = fd.get('type');
                
                let status = 'Hilang';
                if(type === 'temuan') status = 'Ditemukan';
                if(type === 'titipan') status = 'Dititipkan';

                const newItem = {
                    id: Date.now(),
                    type: type,
                    name: fd.get('itemName'),
                    date: fd.get('date'),
                    location: fd.get('location'),
                    desc: fd.get('description') || '-',
                    contact: fd.get('contact'),
                    status: status
                };

                this.items.unshift(newItem);
                this.saveData();
                this.showToast("Laporan berhasil dikirim!", "success");
                this.navigate('list');
            },

            // Admin Logic
            openLoginModal: function() {
                const modal = document.getElementById('login-modal');
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0', 'pointer-events-none');
                    modal.querySelector('div').classList.remove('scale-95');
                    modal.querySelector('div').classList.add('scale-100');
                }, 10);
            },

            closeLoginModal: function() {
                const modal = document.getElementById('login-modal');
                modal.classList.add('opacity-0', 'pointer-events-none');
                modal.querySelector('div').classList.remove('scale-100');
                modal.querySelector('div').classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            },

            checkLogin: function() {
                const pass = document.getElementById('admin-pass').value;
                if(pass === 'admin123') { 
                    this.isAdmin = true;
                    this.closeLoginModal();
                    this.showToast("Login Berhasil! Selamat Datang Admin.", "success");
                    this.navigate('admin');
                } else {
                    this.showToast("Password salah!", "error");
                    document.getElementById('admin-pass').value = '';
                }
            },

            logoutAdmin: function() {
                this.isAdmin = false;
                this.showToast("Anda telah keluar.", "info");
                this.navigate('home');
            },

            renderAdminTable: function() {
                const tbody = document.getElementById('admin-table-body');
                const emptyMsg = document.getElementById('admin-empty');
                if(!tbody) return;

                tbody.innerHTML = '';

                if(this.items.length === 0) {
                    emptyMsg.classList.remove('hidden');
                    return;
                }
                emptyMsg.classList.add('hidden');

                // Sort by ID descending (newest first)
                const sorted = [...this.items].sort((a,b) => b.id - a.id);

                sorted.forEach(item => {
                    const tr = document.createElement('tr');
                    tr.className = "hover:bg-gray-50 dark:hover:bg-gray-700/50 transition border-b border-gray-50 dark:border-gray-700 last:border-0";
                    tr.innerHTML = `
                        <td class="px-6 py-4">
                            <div class="font-bold text-gray-800 dark:text-gray-200 text-sm">${item.name}</div>
                            <div class="text-xs text-gray-500 dark:text-gray-400">${this.formatDate(item.date)}</div>
                            <div class="text-[10px] text-smanBlue dark:text-blue-300 mt-1 font-medium bg-blue-50 dark:bg-blue-900/30 w-fit px-2 py-0.5 rounded">${item.contact}</div>
                        </td>
                        <td class="px-6 py-4">
                            <span class="text-[10px] font-black uppercase tracking-wider ${item.type === 'hilang' ? 'text-red-500 dark:text-red-400' : (item.type === 'temuan' ? 'text-yellow-600 dark:text-yellow-400' : 'text-smanBlue dark:text-blue-400')}">${item.type}</span>
                        </td>
                        <td class="px-6 py-4 text-center">
                            <div class="relative inline-block w-full max-w-[140px]">
                                <select onchange="app.updateItemStatus(${item.id}, this.value)" class="block w-full text-xs bg-white dark:bg-darkInput dark:text-white border border-gray-200 dark:border-gray-600 text-gray-700 py-2 px-3 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-smanBlue transition">
                                    <option value="Hilang" ${item.status === 'Hilang' ? 'selected' : ''}>Hilang</option>
                                    <option value="Ditemukan" ${item.status === 'Ditemukan' ? 'selected' : ''}>Ditemukan</option>
                                    <option value="Dititipkan" ${item.status === 'Dititipkan' ? 'selected' : ''}>Dititipkan</option>
                                    <option value="Diambil" ${item.status === 'Diambil' ? 'selected' : ''}>Sudah Diambil</option>
                                    <option value="Selesai" ${item.status === 'Selesai' ? 'selected' : ''}>Selesai</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
                                    <svg class="fill-current h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-right">
                            <button onclick="app.deleteItem(${item.id})" class="w-8 h-8 rounded-full hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-300 hover:text-smanRed dark:text-gray-500 dark:hover:text-red-400 transition flex items-center justify-center ml-auto">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            },

            updateItemStatus: function(id, newStatus) {
                const index = this.items.findIndex(i => i.id === id);
                if(index !== -1) {
                    this.items[index].status = newStatus;
                    this.saveData();
                    this.showToast("Status diperbarui!", "success");
                }
            },

            deleteItem: function(id) {
                if(confirm("Hapus data ini secara permanen?")) {
                    this.items = this.items.filter(i => i.id !== id);
                    this.saveData();
                    this.renderAdminTable();
                    this.showToast("Data berhasil dihapus.", "success");
                }
            }
        };

        // Start Application
        window.onload = () => app.init();
    </script>
</body>
</html>